#!/bin/bash

# anarchy-theme-remove: Remove a theme from Anarchy by name
# Usage: anarchy-theme-remove <theme-name>

if [ -z "$1" ]; then
  echo "Usage: anarchy-theme-remove <theme-name>"
  exit 1
fi

THEME_NAME="$1"
THEMES_DIR="$HOME/.config/anarchy/themes"
BACKGROUND_DIR="$HOME/.config/anarchy/backgrounds"
CURRENT_DIR="$HOME/.config/anarchy/current"

THEME_PATH="$THEMES_DIR/$THEME_NAME"
BACKGROUND_PATH="$BACKGROUND_DIR/$THEME_NAME"

# Check if theme exists before attempting removal
if [ ! -d "$THEME_PATH" ]; then
  echo "Error: Theme '$THEME_NAME' not found."
  exit 1
fi

# Use readlink -f to resolve symlinks and get the absolute path
if [ "$(readlink -f "$CURRENT_DIR/theme")" = "$(readlink -f "$THEME_PATH")" ]; then
  "$HOME/.local/share/anarchy/bin/anarchy-theme-next"
fi

# Now remove the theme directory and backgrounds for THEME_NAME
rm -rf "$THEME_PATH"
rm -rf "$BACKGROUND_PATH"

